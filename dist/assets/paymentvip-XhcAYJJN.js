import"./style-2rfhQ0Rs.js";import{r as l}from"./request-j9dG38W8.js";/* empty css                 */import{H as h,b as g}from"./wxpay2-72Vt7wAf.js";import{_ as f,E as c,c as u,b as v,a as s,w as p,v as _,F as k,r as V,d as b,o as m,t as y,h as U}from"./index-C-UcPlmF.js";const x={components:{Header:h},data(){return{phone:null,phonecode:null,videoList:[],comment:"",userId:"",contentId:null,videoIdList:[],commentPage:1,commentList:[],fileInfoList:[],displayStatus:[],videoPage:0,searchTerm:null,searchTermPage:1,selectedVipNum:null,VipNumList:null,loginUserInfo:{},recommendUser:{}}},methods:{gotopage(t){this.$router.push(t)},checkLoginStatus(){let t=document.cookie.split(";"),e=!1,o="";for(let i=0;i<t.length;i++){let n=t[i].trim();if(n.indexOf("userInfo=")===0){e=!0,o=n.substring(9);break}}return!(!e||o==="signout")},signOut(){function t(e,o){document.cookie=e+"="+o+"; domain=.kekechat.com; path=/; expires=Fri, 31 Dec 9999 23:59:59 GMT"}t("userInfo","signout"),window.location.href="/"},loginWithAccount(t,e){l.post("/user/LoginRegister/loginWithAccount",{userAccount:t,password:e}).then(function(o){var i=o.data,n=i.data,r=new Date;r.setTime(r.getTime()+3e3*24*60*60*1e3);var d="expires="+r.toUTCString();document.cookie="userInfo="+n+"; "+d+"; domain=.kekechat.com; path=/",window.history.back(),i=JSON.stringify(i),c.success("成功登录")}).catch(function(o){console.log(o)})},paymentForVip(){l.defaults.withCredentials=!0,l.post("/video/paymentAction/paymentForVip",{selectedVipNum:this.selectedVipNum},{withCredentials:!0}).then(t=>{c({type:"success",message:"充值完成,正在跳转"});var e=new Date;e.setTime(e.getTime()+3e3*24*60*60*1e3);var o="expires="+e.toUTCString();document.cookie="payUser=payUserTemp; "+o+"; domain=.kekechat.com; path=/",this.loginWithAccount(this.selectedVipNum,this.selectedVipNum+"123");var i=this.checkLoginStatus();i?(c.success("为你切换为会员账号"),alert("账号为"+this.selectedVipNum+"123  密码为"+this.selectedVipNum+"123")):(c.success("正在登录为新的会员账号"),alert("账号为"+this.selectedVipNum+"  密码为"+this.selectedVipNum+" + 123"))}).catch(t=>{alert(t)})},getUserMembersList(){l.defaults.withCredentials=!0,l.post("/user/userMembers/getUserMembersList",{},{withCredentials:!0}).then(t=>{var e=t.data;this.VipNumList=e.data,this.selectedVipNum=this.VipNumList[0].vipUser}).catch(t=>{c.error(t),alert(t)})},getLoginUserInfo(){var t=this.checkLoginStatus();t?(l.defaults.withCredentials=!0,l.post("/user/userInfo/getLoginUserInfo",{},{withCredentials:!0}).then(e=>{var o=e.data;if(o.data==null){this.loginUserInfo.nickname="默认新用户名",this.loginUserInfo.portraitImage="defaultouxiang.jpg";return}this.loginUserInfo=o.data}).catch(e=>{console.log(e)})):(this.loginUserInfo.nickname="默认新用户名",this.loginUserInfo.portraitImage="defaultouxiang.jpg")}},mounted(){this.getLoginUserInfo(),this.getUserMembersList()},updated(){}},I={class:"container"},L={class:"",id:"vipPayModal",tabindex:"-1","aria-labelledby":"exampleModalLabel"},N={class:"modal-dialog"},w={class:"modal-content"},C=s("div",{class:"modal-header"},[s("h5",{class:"modal-title mx-auto",id:"exampleModalLabel"},"会员获取永久专属账号")],-1),M={class:"modal-body"},T={class:"w-400px my-3 m-auto"},S=s("h5",{class:""},"选择靓号 ",-1),F=["value"],A={class:"w-400px my-3 m-auto"},D=s("h5",{class:""},"输入自定义账号 ",-1),E=s("img",{src:g,class:"mx-auto d-block",style:{width:"200px"}},null,-1),H={class:"modal-footer"};function P(t,e,o,i,n,r){const d=U("Header");return m(),u("body",null,[v(d),s("main",null,[s("div",I,[s("div",L,[s("div",N,[s("div",w,[C,s("div",M,[s("div",T,[S,p(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.selectedVipNum=a),class:"form-select form-select-sm mt-1","aria-label":".form-select-sm example"},[(m(!0),u(k,null,V(n.VipNumList,a=>(m(),u("option",{value:a.vipUser,key:a.id},y(a.vipUser),9,F))),128))],512),[[_,n.selectedVipNum]])]),s("div",A,[D,p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.selectedVipNum=a),type:"text",class:"form-control form-control-sm mt-1",placeholder:"自选账号"},null,512),[[b,n.selectedVipNum]])]),E]),s("div",H,[s("button",{type:"button",onClick:e[2]||(e[2]=a=>r.gotopage("/")),class:"btn btn-secondary"},"不需要会员"),s("button",{type:"button",onClick:e[3]||(e[3]=(...a)=>r.paymentForVip&&r.paymentForVip(...a)),class:"btn btn-primary"},"充值完成")])])])])])])])}const G=f(x,[["render",P]]);export{G as default};
